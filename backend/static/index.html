<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NCIIPC CyberNow</title>

  <!-- Chart.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

  <style>
    /* (Your existing CSS kept intact) */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; color: #333;
    }
    .header { background: linear-gradient(90deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 20px 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative; overflow: hidden; }
    .header::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); animation: shimmer 3s infinite; }
    @keyframes shimmer { 0% { left: -100%; } 100% { left: 100%; } }
    .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display:flex; align-items:center; justify-content:space-between; }
    .navigation { background: rgba(255,255,255,0.1); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.2); padding: 0; }
    .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .nav-menu { display:flex; list-style:none; margin:0; padding:0; }
    .nav-link { display:block; padding:15px 20px; color: rgba(255,255,255,0.9); text-decoration:none; font-weight:500; transition: all 0.3s ease; border-bottom: 3px solid transparent; }
    .nav-link:hover, .nav-link.active { background: rgba(255,255,255,0.15); color: white; border-bottom-color: #00ff88; transform: translateY(-2px); }
    .mobile-menu-toggle { display:none; background:none; border:none; color:white; font-size:1.5rem; cursor:pointer; padding:10px; }
    @media (max-width:768px) {
      .nav-menu { display:none; flex-direction:column; position:absolute; top:100%; left:0; right:0; background: rgba(30,60,114,0.95); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(20px); box-shadow:0 8px 32px rgba(0,0,0,0.3); }
      .nav-menu.active { display:flex; }
      .mobile-menu-toggle { display:block; }
      .nav-link { border-bottom: 1px solid rgba(255,255,255,0.1); }
      .nav-link:hover, .nav-link.active { border-bottom-color: rgba(255,255,255,0.1); border-left: 3px solid #00ff88; transform:none; padding-left: 30px; }
    }
    .logo { display:flex; align-items:center; gap:15px; }
    .logo-icon { width:60px; height:60px; background: linear-gradient(45deg, #00d2d3, #0abde3, #667eea); border-radius:15px; display:flex; align-items:center; justify-content:center; font-size:28px; animation:pulse 2s infinite; position:relative; overflow:hidden; box-shadow:0 8px 25px rgba(0,210,211,0.3); }
    .logo-icon::before { content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent); transform:rotate(45deg); animation: logoShine 3s infinite; }
    .logo-icon::after { content:'‚ö°'; position:absolute; top:5px; right:5px; font-size:12px; opacity:0.7; animation: spark 1.5s infinite alternate; }
    @keyframes logoShine { 0% { transform: rotate(45deg) translateX(-200%); } 100% { transform: rotate(45deg) translateX(200%); } }
    @keyframes spark { 0% { opacity:0.4; transform: scale(0.8); } 100% { opacity:1; transform: scale(1.2); } }
    @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .status-indicator { display:flex; align-items:center; gap:10px; background: rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 25px; -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); }
    .status-dot { width:12px; height:12px; background:#00ff88; border-radius:50%; animation: blink 1.5s infinite; }
    @keyframes blink { 0%,100%{ opacity:1;} 50%{ opacity:0.3;} }
    .container { max-width:1200px; margin: 0 auto; padding: 30px 20px; }
    .dashboard-grid { display:grid; grid-template-columns: 2fr 1fr; gap:30px; margin-bottom:30px; }
    .card { background: rgba(255,255,255,0.95); border-radius:20px; padding:25px; box-shadow:0 15px 35px rgba(0,0,0,0.1); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.2); transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card:hover { transform: translateY(-5px); box-shadow: 0 25px 50px rgba(0,0,0,0.15); }
    .card h2 { color: #2d3748; margin-bottom: 20px; font-size:1.5rem; display:flex; align-items:center; gap:10px; }
    .threat-stats { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:20px; margin-bottom:30px; }
    .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:25px; border-radius:15px; text-align:center; position:relative; overflow:hidden; }
    .stat-card::before { content:''; position:absolute; top:0; left:0; right:0; bottom:0; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent); transform: translateX(-100%); animation: slide 2s infinite; }
    @keyframes slide { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    .stat-number { font-size:2.5rem; font-weight:bold; display:block; margin-bottom:5px; }
    .stat-label { font-size:0.9rem; opacity:0.9; }
    .news-feed { max-height:600px; overflow-y:auto; }
    .news-item { border-left:4px solid #667eea; padding:15px; margin-bottom:15px; background: linear-gradient(90deg, rgba(102,126,234,0.1), transparent); border-radius:5px; transition: all 0.3s ease; }
    .news-item:hover { background: linear-gradient(90deg, rgba(102,126,234,0.2), transparent); transform: translateX(5px); }
    .news-time { font-size:0.8rem; color:#666; margin-bottom:5px; }
    .news-title { font-weight:600; margin-bottom:8px; color:#2d3748; }
    .news-content { font-size:0.9rem; color:#4a5568; line-height:1.4; }
    .severity { display:inline-block; padding:3px 8px; border-radius:12px; font-size:0.75rem; font-weight:600; margin-left:10px; }
    .high { background:#fed7d7; color:#c53030; } .medium { background:#feebc8; color:#dd6b20; } .low { background:#c6f6d5; color:#2f855a; }
    .chart-container { position:relative; height:300px; margin:20px 0; }
    .apt-section { display:grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap:20px; margin-top:30px; }
    .apt-card { background: linear-gradient(135deg,#ff6b6b 0%,#ee5a24 100%); color:white; padding:20px; border-radius:15px; position:relative; overflow:hidden; }
    .apt-card::after { content:''; position:absolute; top:50%; right:-20px; width:100px; height:100px; background:rgba(255,255,255,0.1); border-radius:50%; transform: translateY(-50%); }
    .apt-name { font-weight:bold; font-size:1.1rem; margin-bottom:10px; }
    .apt-description { font-size:0.9rem; opacity:0.9; line-height:1.4; }
    .sector-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(150px,1fr)); gap:15px; margin-top:20px; }
    .sector-item { background: rgba(255,255,255,0.8); padding:15px; border-radius:10px; text-align:center; border:2px solid transparent; transition: all 0.3s ease; }
    .sector-item:hover { border-color:#667eea; background: rgba(102,126,234,0.1); }
    .sector-icon { font-size:2rem; margin-bottom:10px; display:block; }
    @media (max-width:768px) { .dashboard-grid { grid-template-columns:1fr; } .header-content { flex-direction:column; gap:15px; } }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">üåê</div>
        <div>
          <h1>NCIIPC CyberNow</h1>
          <p>National Critical Information Infrastructure Protection Centre</p>
        </div>
      </div>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>System Active</span>
      </div>
    </div>
    <nav class="navigation">
      <div class="nav-container">
        <button id="mobileToggle" class="mobile-menu-toggle" aria-expanded="false">‚ò∞</button>
        <ul class="nav-menu" id="navMenu">
          <li><a href="#dashboard" class="nav-link active" data-target="dashboard">üìä Dashboard</a></li>
          <li><a href="#live-feed" class="nav-link" data-target="live-feed">üö® Live Feed</a></li>
          <li><a href="#apt-groups" class="nav-link" data-target="apt-groups">üéØ APT Groups</a></li>
          <li><a href="#sectors" class="nav-link" data-target="sectors">üè¢ Sectors</a></li>
          <li><a href="#trends" class="nav-link" data-target="trends">üìà Trends</a></li>
          <li><a href="#analytics" class="nav-link" data-target="analytics">üî¨ Analytics</a></li>
          <li><a href="#reports" class="nav-link" data-target="reports">üìã Reports</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <div class="container">
    <!-- Summary -->
    <div class="threat-stats" id="dashboard">
      <div class="stat-card">
        <span class="stat-number" id="totalThreatsToday">0</span>
        <span class="stat-label">Total Threats Today</span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="criticalIncidents">0</span>
        <span class="stat-label">Critical Incidents</span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="affectedSectors">0</span>
        <span class="stat-label">Affected Sectors</span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="threatsMitigated">0</span>
        <span class="stat-label">Threats Mitigated</span>
      </div>
    </div>

    <!-- Live feed + donut -->
    <div class="dashboard-grid" id="live-feed">
      <div class="card">
        <h2>üö® Live Cyber Threat Feed</h2>
        <div class="news-feed" id="liveFeedList"></div>
      </div>
      <div class="card">
        <h2>üìä Threat Distribution</h2>
        <div class="chart-container">
          <canvas id="threatChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Trends -->
    <div class="card" id="trends">
      <h2>üìà Threat Trends Analysis</h2>
      <div class="chart-container">
        <canvas id="trendChart"></canvas>
      </div>
    </div>

    <!-- Analytics -->
    <div class="card" id="analytics">
      <h2>üî¨ Advanced Analytics</h2>
      <div class="dashboard-grid">
        <div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; padding:25px; border-radius:15px;">
          <h3>ML Threat Prediction</h3>
          <div style="display:flex; justify-content:space-between;">
            <div><div id="mlAccuracy" style="font-size:2rem; font-weight:bold;">0%</div><div>Accuracy Rate</div></div>
            <div style="font-size:3rem; opacity:0.7;">ü§ñ</div>
          </div>
        </div>
        <div style="background:linear-gradient(135deg,#ff6b6b 0%,#ee5a24 100%); color:white; padding:25px; border-radius:15px;">
          <h3>Anomaly Detection</h3>
          <div style="display:flex; justify-content:space-between;">
            <div><div id="anomaliesDetected" style="font-size:2rem; font-weight:bold;">0</div><div>Anomalies Detected</div></div>
            <div style="font-size:3rem; opacity:0.7;">üîç</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent reports -->
    <div class="card" id="reports">
      <h2>üìã Incident Reports</h2>
      <div id="recentReportsList"></div>
    </div>
  </div>

  <script src="/static/dashboard.js"></script>
</body>
</html>
